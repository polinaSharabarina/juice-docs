"use strict";(self.webpackChunkjuice_docs=self.webpackChunkjuice_docs||[]).push([[806],{4493:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"juice/pro-users/cli-app/advanced-cli/labels","title":"Labels and Match Labels","description":"Labels in Juice are key-value pairs that can be attached to agents (GPU-hosting machines). They provide a flexible and powerful way to organize, categorize, and select agents based on various attributes. Match labels are used when creating sessions or running applications to ensure that the workload is assigned to an agent with the specified labels.","source":"@site/docs/juice/pro-users/cli-app/advanced-cli/labels.md","sourceDirName":"juice/pro-users/cli-app/advanced-cli","slug":"/juice/pro-users/cli-app/advanced-cli/labels","permalink":"/juice-docs/docs/juice/pro-users/cli-app/advanced-cli/labels","draft":false,"unlisted":false,"editUrl":"https://github.com/juice-labs/juice-docs/edit/master/docs/juice/pro-users/cli-app/advanced-cli/labels.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Labels and Match Labels","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Advanced Parameters","permalink":"/juice-docs/docs/juice/pro-users/cli-app/advanced-cli/advanced-parameters"},"next":{"title":"Taints and Tolerates","permalink":"/juice-docs/docs/juice/pro-users/cli-app/advanced-cli/taints-tolerates"}}');var l=s(4848),i=s(8453);const r={title:"Labels and Match Labels",sidebar_position:3},c="Labels and Match Labels",t={},o=[{value:"Applying Labels",id:"applying-labels",level:2},{value:"Using Match Labels",id:"using-match-labels",level:2},{value:"Practical Examples",id:"practical-examples",level:2},{value:"Best Practices for Using Labels",id:"best-practices-for-using-labels",level:2},{value:"Advanced Usage: Label Selectors",id:"advanced-usage-label-selectors",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"labels-and-match-labels",children:"Labels and Match Labels"})}),"\n",(0,l.jsx)(n.p,{children:"Labels in Juice are key-value pairs that can be attached to agents (GPU-hosting machines). They provide a flexible and powerful way to organize, categorize, and select agents based on various attributes. Match labels are used when creating sessions or running applications to ensure that the workload is assigned to an agent with the specified labels."}),"\n",(0,l.jsx)(n.h2,{id:"applying-labels",children:"Applying Labels"}),"\n",(0,l.jsx)(n.p,{children:"Labels are applied to agents when they are started or configured. Multiple labels can be applied to a single agent, and each label consists of a key and a value, separated by an equals sign."}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"gpu-type=a100 \n"})}),"\n",(0,l.jsx)(n.h2,{id:"using-match-labels",children:"Using Match Labels"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"When creating a session or running an application, users can specify match labels to select agents with specific attributes."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["The system will only consider agents that have ",(0,l.jsx)(n.strong,{children:"all"})," of the specified labels."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"GPU Type and Capacity:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"juice agent run --labels gpu-type=a100,gpu-memory=80gb,cuda-version=11.5\n"})}),"\n",(0,l.jsx)(n.p,{children:"This command starts an agent, labeling it with an A100 GPU, 80GB of GPU memory, and CUDA version 11.5. Run the following command to use this agent:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"juice run --match-labels gpu-type=a100,gpu-memory=80gb my_large_model_training.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This runs ",(0,l.jsx)(n.em,{children:"my_large_model_training.py"})," on an agent with an A100 GPU and 80GB of memory."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Software Environment and Version:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"juice agent run --labels env=pytorch,env-version=1.9,python-version=3.8\n"})}),"\n",(0,l.jsx)(n.p,{children:"This labels an agent with PyTorch 1.9 and Python 3.8."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"juice run --match-labels env=pytorch,env-version=1.9 my_pytorch_script.py\n"})}),"\n",(0,l.jsx)(n.p,{children:"This ensures my_pytorch_script.py runs on an agent with PyTorch 1.9."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Location and Purpose:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"juice agent run --labels location=us-east,purpose=inference,network-speed=10gbps\n"})}),"\n",(0,l.jsx)(n.p,{children:"This labels an agent for inference tasks in the US East region with a 10Gbps network."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"juice run --match-labels location=us-east,purpose=inference my_inference_service.py \n"})}),"\n",(0,l.jsx)(n.p,{children:"This runs an inference service on an appropriate agent in the US East region."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.ol,{start:"6",children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Combining Multiple Criteria:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:"juice run --match-labels gpu-type=v100,env=tensorflow,location=eu-west,purpose=training my_training_job.py \n"})}),"\n",(0,l.jsx)(n.p,{children:"This complex example runs my_training_job.py on an agent that has a V100 GPU, TensorFlow installed, is located in Western Europe, and is designated for training purposes."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices-for-using-labels",children:"Best Practices for Using Labels"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Consistency"}),": Develop a consistent labeling scheme across your organization."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Granularity"}),": Use labels that are specific enough to be useful but not so specific that they become cumbersome."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Documentation"}),": Maintain documentation of your label schema for all users."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Regular Review"}),": Periodically review and update your labeling strategy as your infrastructure and needs evolve."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"advanced-usage-label-selectors",children:"Advanced Usage: Label Selectors"}),"\n",(0,l.jsx)(n.p,{children:"Juice also supports more complex label selectors for advanced use cases. Some of these commands include:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Multiple Values"}),": To match agents with either V100 or A100 GPUs"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:'juice run --match-labels "gpu-type in (v100,a100)"\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Exclusions"}),": To avoid production environments"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-powershell",children:'juice run --match-labels "env!=production"\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"With effective use of labels and match labels, juice users can create a highly organized and efficient GPU resource allocation system to ensure that each workload runs on the most appropriate environment configuration."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var a=s(6540);const l={},i=a.createContext(l);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);